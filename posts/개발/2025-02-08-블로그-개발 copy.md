# 블로그 개발

문제는 URL 파라미터에 슬래시(`/`)가 포함되어 있어 `:href`처럼 단일 파라미터로는 전체 경로를 캡처하지 못하기 때문입니다. React Router는 기본적으로 콜론(`:`)으로 지정한 파라미터가 슬래시를 만나면 거기서 매칭을 중단합니다.

이를 해결하려면 **와일드카드(splat) 매칭**을 사용해야 합니다. React Router v6에서는 와일드카드(`*`)를 이용해 경로의 나머지 부분을 한 번에 캡처할 수 있습니다.

---

## 해결 방법

1. **라우트 수정하기**  
   현재 라우트는  
   ```jsx
   <Route path="/post-view/:href" element={<PostView />} />
   ```  
   로 되어 있는데, 이 경우 `:href`는 슬래시를 포함한 전체 문자열을 받지 못합니다.  
   대신 와일드카드(`*`)를 사용하여 전체 경로를 캡처하도록 수정합니다. 예를 들어,  
   ```jsx
   <Route path="/post-view/*" element={<PostView />} />
   ```  
   와 같이 작성하면 `/post-view/` 뒤의 모든 경로가 와일드카드로 캡처됩니다.

2. **컴포넌트에서 파라미터 읽기**  
   React Router v6에서는 와일드카드로 캡처한 값은 `useParams()`로 조회할 때 키가 `"*"`인 값으로 제공됩니다.  
   따라서, `PostView` 컴포넌트에서는 다음과 같이 수정합니다:

   ```jsx
   import { useEffect, useState } from "react";
   import { useParams } from "react-router-dom";
   import ReactMarkdown from "react-markdown";

   export default function PostView() {
     // 와일드카드로 캡처한 전체 경로를 params["*"]로 읽어옵니다.
     const { "*": href } = useParams();
     const [markdown, setMarkdown] = useState("");
     const [loading, setLoading] = useState(true);
     const [error, setError] = useState(null);

     useEffect(() => {
       async function fetchMarkdown() {
         try {
           // href는 예: posts/개발/2025-02-08-블로그-개발.md
           // public 폴더 내에 markdown 파일이 있다면, 해당 경로를 그대로 사용
           const response = await fetch(`/${href}`);
           if (!response.ok) {
             throw new Error(`HTTP error! status: ${response.status}`);
           }
           const text = await response.text();
           setMarkdown(text);
         } catch (err) {
           setError(err);
         } finally {
           setLoading(false);
         }
       }
       fetchMarkdown();
     }, [href]);

     if (loading) return <div>Loading...</div>;
     if (error) return <div>Error fetching markdown: {error.message}</div>;

     return (
       <div className="post-view">
         <ReactMarkdown>{markdown}</ReactMarkdown>
       </div>
     );
   }
   ```

3. **URL 예시**  
   예를 들어, URL이  
   ```
   http://localhost:3000/#/post-view/posts/%EA%B0%9C%EB%B0%9C/2025-02-08-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EA%B0%9C%EB%B0%9C.md
   ```  
   인 경우, `useParams()`를 통해 `href`에는  
   ```
   posts/개발/2025-02-08-블로그-개발.md
   ```  
   (디코딩된 값)이 들어가게 되고, 이 값을 이용해 markdown 파일을 fetch할 수 있습니다.

---

## 정리

- 라우트 경로를 `<Route path="/post-view/*" element={<PostView />} />` 로 수정합니다.
- `PostView` 컴포넌트에서는 `const { "*": href } = useParams();` 를 사용해 전체 경로를 가져옵니다.
- 이 `href`를 이용해 fetch 요청을 보내고, 받은 markdown 내용을 렌더링합니다.

이렇게 수정하면 URL 파라미터에 슬래시가 포함된 경우에도 전체 경로를 올바르게 캡처하여 markdown 파일을 가져오고 렌더링할 수 있습니다.

# 테스트### 테스트